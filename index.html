<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.5.0/aframe.min.js"></script>

    <style>
    
    </style>
</head>
<body>
    <a-scene>
        <!-- Ustawienie tła i podłogi -->
        <a-sky color="#ECECEC"></a-sky>
        <a-plane position="0 0 0" rotation="-90 0 0" width="500" height="500" color="#7BC8A4"></a-plane>

        <!-- Sekcja zasobów -->
        <a-assets timeout="3600000">
            <a-asset-item id="solar-panel-model" src="Panel.gltf"></a-asset-item>
            <video id="my-video" src="christ.mp4" autoplay loop muted></video>
        </a-assets>

        <!-- Punkty nawigacyjne -->
        <a-ring position="-50 0.5 -50" radius-inner="0.5" radius-outer="1" color="#29B6F6" class="clickable"></a-ring>
        <a-ring position="50 0.5 -50" radius-inner="0.5" radius-outer="1" color="#FFC107" class="clickable"></a-ring>

        <!-- Model panelu słonecznego -->
        <a-entity gltf-model="#solar-panel-model" position="-50 0 -50" scale="0.1 0.1 0.1"></a-entity>
        
        <!-- Wideo -->
        <a-video src="#my-video" position="0 1.6 -4" rotation="0 0 0" width="16" height="9"></a-video>

        <!-- Kamera i rig kamery dla nawigacji -->
        <a-entity id="cameraRig">
            <a-camera look-controls enabled="true" position="0 1.6 0"></a-camera>
        </a-entity>
        <a-entity id="playButton" geometry="primitive: plane; width: 2; height: 1" material="color: blue" position="0 1 -3" class="clickable">
            <a-text value="Odtwórz" align="center" color="#FFF"></a-text>
        </a-entity>
        <!-- Światło -->
        <a-light type="ambient" color="#555"></a-light>
        <a-light type="point" intensity="2" position="0 4 0"></a-light>
    </a-scene>

    <script>
        // Dodajemy obsługę kliknięcia dla punktów nawigacyjnych
        document.querySelector('#playButton').addEventListener('click', function () {
            var videoEntity = document.querySelector('#my-video');
            if (videoEntity) {
                var video = videoEntity.components.material.data.src; // Uzyskanie źródła wideo
                if (video) {
                    video.play(); // Odtwarzanie wideo
                }
            }
        });
        var cameraRig = document.getElementById('cameraRig');

    // Funkcja do włączania/wyłączania kontroli kamery
    function toggleCameraControls(enable) {
        cameraRig.setAttribute('look-controls', 'enabled', enable);
    }

    // Obsługa kliknięcia przycisku play
    document.querySelector('#playButton').addEventListener('click', function () {
        var videoEntity = document.querySelector('#my-video');
        if (videoEntity) {
            var video = videoEntity.components.material.data.src;
            if (video) {
                video.play();
                toggleCameraControls(true); // Włączenie kontroli kamery po kliknięciu
            }
        }
    });

    // Wyłączenie kontroli kamery, gdy kursor znajduje się nad przyciskiem
    document.querySelector('#playButton').addEventListener('mouseenter', function() {
        toggleCameraControls(false);
    });

    // Włączenie kontroli kamery, gdy kursor opuszcza przycisk
    document.querySelector('#playButton').addEventListener('mouseleave', function() {
        toggleCameraControls(true);
    });
    </script>
</body>
</html>
